#Configurar Arch Linux
echo          ------==Script Creado por GerardoHD==------
echo https://github.com/GerardoHD
echo Script creado para Arch Linux
echo Se distribuye con la esperanza de que sea útil, pero sin ninguna garantía
sleep 1s
if [ "$(id -u)" -eq 0 ] ; then
        echo " ADVERTENCIA: Makepkg no compilará paquetes desde AUR en una sesión Root "
        echo " Este Script usará sudo cuando sea necesario. Deteniendo. "
        echo " Simplemente ejecute este Script desde su usuario. "
        exit
fi
#
echo Probando conexión a Internet
ping -c 3 www.archlinux.org
speedtest
sudo mount -o remount,size=2G,noatime /tmp
#
echo       ---=Configurando Pacman=---
sleep 1s
echo Inicializando Pacman
sudo pacman-key --populate archlinux
sudo pacman-key --init
sudo pacman -Syyu --noconfirm
#
echo     ---=Instalando Bases para Arch Linux=---
sudo pacman -S pacman-contrib linux-headers dkms flatpak git
sudo pacman -S wireless_tools wpa_supplicant wpa_actiond dialog pacman-contrib
echo   -=Pulse Audio=-
sudo pacman -S pulseaudio-alsa libcanberra-pulse
echo   -=X Window System=-
sudo pacman -S xorg-server xorg-xinit xterm xorg-twm xorg-xclock xterm xorg-apps
sudo pacman -S libinput xf86-input-libinput xorg-xinput
sudo pacman -S mesa mesa-demos alsa-utils
#
echo     ---=Instalando Drivers Graficos=---
PS3='Introduce tu elecciòn: '
options=("Drivers Intel" "Drivers AMD" "Drivers Nvidia" "Drivers libres Nvidia" "Salir")
select opt in "${options[@]}"
do
    case $opt in
        "Drivers Intel")
            echo "Escogiste Instalar Drivers Intel"
            sudo pacman -S intel-ucode xf86-video-intel
            break
            ;;
        "Drivers AMD")
            echo "Escogiste Instalar Drivers AMD"
            sudo pacman -S xf86-video-ati
            break
            ;;
        "Drivers Nvidia")
            echo "Escogiste Instalar Drivers Nvidia"
            sudo pacman -S nvidia nvidia-utils
            break
            ;;
        "Drivers libres Nvidia")
            echo "Escogiste Instalar Drivers libres Nvidia"
            sudo pacman -S xf86-video-nouveau
            break
            ;;
        *) echo invalid option;;
    esac
done
#
echo   -=Instalando Soporte AUR=-
git clone https://aur.archlinux.org/trizen.git
cd trizen && makepkg -si
cd ..
#
git clone https://aur.archlinux.org/package-query.git
cd package-query && makepkg -si
cd ..
#
git clone https://aur.archlinux.org/yaourt.git
cd yaourt && makepkg -si
cd ..
rm -rf trizen package-query yaourt
#
echo  -=Actualizando Arch Linux=-
speedtest
trizen -Syyua
os-prober
sudo grub-mkconfig -o /boot/grub/grub.cfg
#
echo     ---=Instalando Software desde Repositorios Oficiales=---
sudo pacman -S btrfs-progs dosfstools exfat-utils f2fs-tools gpart npm npm-check-updates nodejs
sudo pacman -S jfsutils mtools nilfs-utils ntfs-3g polkit reiserfsprogs xfsprogs
sudo pacman -S gvfs p7zip lrzip lzip minizip gst-libav atomicparsley unarj unace
sudo pacman -S libunrar unrar unarchiver zip cmus opusfile x264 elinks 
sudo pacman -S mtools gvfs-mtp mlocate ffmpegthumbnailer mtpfs
sudo pacman -S speedtest-cli cmatrix inxi bash-completion vim 
sudo pacman -S openssh sshfs youtube-dl android-tools xdg-user-dirs
#Fuentes
sudo pacman -S noto-fonts noto-fonts-cjk noto-fonts-emoji noto-fonts-extra
sudo pacman -S ttf-hack libotf ttf-roboto ttf-liberation
sudo pacman -S ttf-fira-sans ttf-fira-mono ttf-ubuntu-font-family 
#Temas
sudo pacman -S gtk-engine-murrine gtk-engines 
sudo pacman -S adapta-gtk-theme materia-gtk-theme papirus-icon-theme
sudo pacman -S kvantum-qt5 kvantum-theme-materia
#Programas 
sudo pacman -S evince gnome-disk-utiltiy gedit-plugins transmission-gtk
sudo pacman -S menulibre geary tilix
sudo pacman -S calibre rhythmbox
#
#Activar las siguientes dos lineas SOLO si no se va a instalar KDE
#sudo pacman -S qt5-styleplugins qt5ct 
#sudo sed -i '$ a\QT_QPA_PLATFORMTHEME=qt5ct' /etc/environment
sleep 3s
#echo -=VLC=-
#sudo pacman -S vlc libva-vdpau-driver libva-intel-driver qt4
#echo -=Steam=-
#sudo pacman -S steam steam-native-runtime
#echo -=KODI=-
#sudo pacman -S kodi kodi-addon-adsp-freesurround kodi-addon-audioencoder-flac kodi-addon-audioencoder-lame
#sudo pacman -S kodi-addon-audioencoder-vorbis kodi-addon-audioencoder-wav
#sudo pacman -S kodi-addon-visualization-spectrum kodi-eventclients p8-platform
#sudo pacman -S mediaelch
#echo -=LibreOffice=-
#sudo pacman -S libreoffice-fresh libreoffice-fresh-es libcdr
#echo -=Soporte de impresion=-
#sudo pacman -S gutenprint foomatic-db-gutenprint-ppds cups libcups iscan iscan-data
#sudo pacman -S system-config-printer cups-pk-helper gtk3-print-backends
#
echo     ---=Instalando Flatpak Sotware=---
flatpak remote-add --if-not-exists flathub https://dl.flathub.org/repo/flathub.flatpakrepo
flatpak install flathub org.gtk.Gtk3theme.Materia{,-dark,-light}{,-compact} -y
flatpak install flathub com.spotify.Client -y
flatpak install flathub de.haeckerfelix.gradio -y
flatpak install flathub com.github.needleandthread.vocal -y
flatpak install flathub de.haeckerfelix.Fragments -y
#
echo     ---=Instalando Software desde Arch User Repository=---
trizen -S pamac-aur pacli otf-san-francisco ttf-roboto-slab ttf-bookerly
trizen -S rhythmbox-plugin-alternative-toolbar-git nautilus-admin libinput-gestures
trizen -S capitaine-cursors la-capitaine-icon-theme-git arch-silence-grub-theme macos11-icon-theme
trizen -S google-chrome
trizen -S etcher-bin
trizen -S plymouth-git plymouth-theme-arch-beat plymouth-theme-arch-charge-big 
sleep 3s
#echo -=KODI=-
#trizen -S kodi-addon-pvr-iptvsimple-git kodi-platform-git libplatform-legacy
#trizen -S kodi-standalone-service
#trizen -S filebot java-openjfx
#echo -=Steam=-
#trizen -S steam-fonts
#echo -=PLEX=-
#trizen -S plex-media-server
#trizen -S plex-media-server-plexpass
#trizen -S plex-media-player
#echo -=Soporte Impresora Epson L210=-
#trizen -S epson-inkjet-printer-201207w
#echo -=WPS-Office=-
#trizen -S wps-office wps-office-extension-spanish-dictionary wps-office-mui-es-es
#trizen -S wps-office-mui-es-mx ttf-wps-fonts
#
#-=Freezer=-
#trizen -S gtk-theme-united-gnome  macos-icon-theme spotify
#sudo pacman -S avidemux-cli avidemux-qt albert gtk-arc-flatabulous-theme-git
#
echo     ---=Descargando Sudocabulary desde Github=---
#
curl https://raw.githubusercontent.com/badarsh2/Sudocabulary/master/script.sh | bash
#
echo Modificando valor Swappiness
echo >> 99-sysctl.conf
sudo sed -i '$ a\vm.swappiness=70' 99-sysctl.conf
sudo sed -i '$ a\vm.vfs_cache_pressure=50' 99-sysctl.conf
sudo mv  99-sysctl.conf /etc/sysctl.d/99-sysctl.conf
#
echo Cambiando configuraciòn de UDisks2
sudo sed -i 's/auth_admin_keep/yes/g' /usr/share/polkit-1/actions/org.freedesktop.UDisks2.policy
#
echo Activando libinput-gestures
libinput-gestures-setup autostart
echo  -=Actualizando Arch Linux=-
speedtest
sudo mount -o remount,size=2G,noatime /tmp
trizen -Syyua
os-prober
sudo grub-mkconfig -o /boot/grub/grub.cfg
sudo fc-cache -f -v
sudo gtk-update-icon-cache
xdg-user-dirs-update
#
echo       ---=Limpiando Arch Linux=--
sleep 1s
echo
#!/bin/bash
sudo pacman-optimize
sudo pacman -Sc
sudo yaourt -Sc
df -h
sleep 3s
#
#echo       ---=Activando Servicio Cups "cupsd"=---
#sudo systemctl enable org.cups.cupsd.service
echo       ---=Activando Servicio Network Manager=---
sudo systemctl enable NetworkManager.service
echo       ---=Activando Servicio SSHD "sshd"=---
sudo systemctl enable sshd.service
sudo systemctl enable sshd.socket
#echo       ---=Activando Servicio Plex Media Server=---
#systemctl enable plexmediaserver.service
#
sleep 1s
PS3='Introduce tu elecciòn: '
options=("Arch-Cinnamon" "Arch-Deepin" "Arch-Gnome" "Arch-KDE" "Arch-Mate" "Arch-Xfce" "Salir")
select opt in "${options[@]}"
do
    case $opt in
        "Arch-Cinnamon")
            echo "Escogiste Instalar Cinnamon"
            Arch-Cinnamon
            break
            ;;
        "Arch-Deepin")
            echo "Escogiste Instalar Deepin"
            Arch-Deepin
            break
            ;;
        "Arch-Gnome")
            echo "Escogiste Instalar Gnome"
            Arch-Gnome
            break
            ;;
        "Arch-KDE")
            echo "Escogiste Instalar KDE"
            Arch-KDE
            break
            ;;
        "Arch-Mate")
            echo "Escogiste Instalar Mate"
            Arch-Mate
            break
            ;;
        "Arch-Xfce")
            echo "Escogiste Instalar Xfce"
            Arch-Xfce
            break
            ;;
        "Salir")
            break
            ;;
        *) echo invalid option;;
    esac
done
#
