#ChromiumOS
echo          ------==Script Creado por GerardoHD==------
echo https://github.com/GerardoHD
echo       ---=Preparando Sistema de archivos=---
mount -o remount, rw /
mkdir /usr/lib/cromo
mkdir /opt/google/chrome/pepper
echo       ---=Descargando Scripts de GerardoHD=---
cd /usr/local/bin/
sudo rm -rf screenfetch
sudo rm -rf Actualizar-Manjaro
sudo rm -rf Actualizar-Ubuntu
sudo rm -rf Backup-Gnome-Screensaver
sudo rm -rf Blue-Script
sudo rm -rf Configurar-Manjaro-Net
sudo rm -rf Configurar-Ubuntu
sudo rm -rf Descargar-Scripts
sudo rm -rf Flat-Plat-Screensaver
sudo rm -rf Limpiar-Manjaro
sudo rm -rf Limpiar-Ubuntu
sudo rm -rf Original-Gnome-Screensaver
sudo rm -rf Red-Script
sudo rm -rf Reparar-Pacman-db.lck
sudo rm -rf Reparar-var-Ubuntu
sudo rm -rf ROOT-A
sudo rm -rf STATE
sudo wget -c https://raw.githubusercontent.com/KittyKatt/screenFetch/master/screenfetch-dev -O screenfetch
sudo wget -c https://raw.githubusercontent.com/GerardoHD/Linux/master/Scripts/Actualizar-Manjaro
sudo wget -c https://raw.githubusercontent.com/GerardoHD/Linux/master/Scripts/Actualizar-Ubuntu
sudo wget -c https://raw.githubusercontent.com/GerardoHD/Linux/master/Scripts/Backup-Gnome-Screensaver
sudo wget -c https://raw.githubusercontent.com/GerardoHD/Linux/master/Scripts/Blue-Script
sudo wget -c https://raw.githubusercontent.com/GerardoHD/Linux/master/Scripts/Configurar-Manjaro-Net
sudo wget -c https://raw.githubusercontent.com/GerardoHD/Linux/master/Scripts/Configurar-Ubuntu
sudo wget -c https://raw.githubusercontent.com/GerardoHD/Linux/master/Scripts/Descargar-Scripts
sudo wget -c https://raw.githubusercontent.com/GerardoHD/Linux/master/Scripts/Flat-Plat-Screensaver
sudo wget -c https://raw.githubusercontent.com/GerardoHD/Linux/master/Scripts/Limpiar-Manjaro
sudo wget -c https://raw.githubusercontent.com/GerardoHD/Linux/master/Scripts/Limpiar-Ubuntu
sudo wget -c https://raw.githubusercontent.com/GerardoHD/Linux/master/Scripts/Original-Gnome-Screensaver
sudo wget -c https://raw.githubusercontent.com/GerardoHD/Linux/master/Scripts/Red-Script
sudo wget -c https://raw.githubusercontent.com/GerardoHD/Linux/master/Scripts/Reparar-Pacman-db.lck
sudo wget -c https://raw.githubusercontent.com/GerardoHD/Linux/master/Scripts/Reparar-var-Ubuntu
sudo wget -c https://raw.githubusercontent.com/GerardoHD/Linux/master/Scripts/ROOT-A
sudo wget -c https://raw.githubusercontent.com/GerardoHD/Linux/master/Scripts/STATE
sudo chmod +x screenfetch
sudo chmod +x Actualizar-Manjaro
sudo chmod +x Actualizar-Ubuntu
sudo chmod +x Backup-Gnome-Screensaver
sudo chmod +x Blue-Script
sudo chmod +x Configurar-Manjaro-Net
sudo chmod +x Configurar-Ubuntu
sudo chmod +x Descargar-Scripts
sudo chmod +x Flat-Plat-Screensaver
sudo chmod +x Limpiar-Manjaro
sudo chmod +x Limpiar-Ubuntu
sudo chmod +x Original-Gnome-Screensaver
sudo chmod +x Red-Script
sudo chmod +x Reparar-Pacman-db.lck
sudo chmod +x Reparar-var-Ubuntu
sudo chmod +x ROOT-A
sudo chmod +x STATE
cd /
#
echo       ---=Instalando Flash para ChromiumOS=---
#!/bin/bash
#Clonado desde https://gist.github.com/dz0ny/3065781
#based on https://wiki.archlinux.org/index.php/Chromium

if [ `uname -m` == 'x86_64' ]; then
  # 64-bit
  export CHROME="https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb"
  export TALK="https://dl.google.com/linux/direct/google-talkplugin_current_amd64.deb"
  export JAVA="http://javadl.sun.com/webapps/download/AutoDL?BundleId=65687"
else
  # 32-bit
  export CHROME="https://dl-ssl.google.com/linux/direct/google-chrome-stable_current_i386.deb"
  export TALK="https://dl.google.com/linux/direct/google-talkplugin_current_i386.deb"
  export JAVA="http://javadl.sun.com/webapps/download/AutoDL?BundleId=65685"
fi


#clean stuff
mount -o remount, rw /
cd /opt/
rm "/opt/deb2tar.py"

curl -o "/opt/deb2tar.py" "https://raw.github.com/gist/3065781/deb2tar.py"

mkdir -p /usr/lib/mozilla/plugins/

#Flash, pdf

echo "Downloading Google Chrome"
curl -z "/opt/chrome-bin.deb" -o "/opt/chrome-bin.deb" -L $CHROME


python /opt/deb2tar.py /opt/chrome-bin.deb /opt/chrome.tar.lzma
rm -rf chrome-unstable
mkdir chrome-unstable
tar -xvf /opt/chrome.tar.lzma -C chrome-unstable

#mp3,mp4
cp /opt/chrome-unstable/opt/google/chrome/libffmpegsumo.so /usr/lib/cromo/ -f
cp /opt/chrome-unstable/opt/google/chrome/libffmpegsumo.so /opt/google/chrome/ -f
cp /opt/chrome-unstable/opt/google/chrome/libffmpegsumo.so /usr/lib/mozilla/plugins/ -f

#pdf
cp /opt/chrome-unstable/opt/google/chrome/libpdf.so /opt/google/chrome/ -f

#flash
cp /opt/chrome-unstable/opt/google/chrome/PepperFlash/libpepflashplayer.so /opt/google/chrome/pepper/ -f
cp /opt/chrome-unstable/opt/google/chrome/PepperFlash/manifest.json /opt/google/chrome/pepper/ -f
curl -L https://raw.github.com/gist/3065781/pepper-flash.info > /opt/google/chrome/pepper/pepper-flash.info

rm -rf chrome-unstable
rm /opt/chrome.tar.lzma


## Google Talk
echo "Downloading Google Talk plugin"
curl -z "/opt/talk-bin.deb" -o "/opt/talk-bin.deb" -L $TALK

python /opt/deb2tar.py /opt/talk-bin.deb /opt/talk.tar.gz
rm -rf /opt/google/talkplugin

tar -xvf /opt/talk.tar.gz -C /
rm /opt/google/chrome/pepper/libnpgoogletalk.so
ln -s /opt/google/talkplugin/libnpgoogletalk.so /opt/google/chrome/pepper/libnpgoogletalk.so
rm /opt/google/chrome/pepper/libnpgtpo3dautoplugin.so
ln -s /opt/google/talkplugin/libnpgtpo3dautoplugin.so /opt/google/chrome/pepper/libnpgtpo3dautoplugin.so

rm /opt/talk.tar.gz

## JAVA
## JAVA
echo "Downloading Oracle Java"
curl -z "/opt/java-bin.tar.gz" -o "/opt/java-bin.tar.gz" -L $JAVA

rm -rf /usr/lib/jvm/java-7-oracle/jre/
mkdir -p /usr/lib/jvm/java-7-oracle/jre/
tar -xvf /opt/java-bin.tar.gz -C /usr/lib/jvm/java-7-oracle/jre/ --strip-components 1
rm /usr/lib/cromo/libnpjp2.so
if [ `uname -m` == 'x86_64' ]; then
  ln -s /usr/lib/jvm/java-7-oracle/jre/lib/amd64/libnpjp2.so /usr/lib64/cromo/libnpjp2.so
  ln -s /usr/lib/jvm/java-7-oracle/jre/lib/amd64/libnpjp2.so /usr/lib64/mozilla/plugins/libnpjp2.so
  ln -s /usr/lib/jvm/java-7-oracle/jre/lib/amd64/libnpjp2.so /usr/lib64/libnpjp2.so
  ln -s /usr/lib/jvm/java-7-oracle/jre/lib/amd64/libnpjp2.so /opt/google/chrome/libnpjp2.so
else
  ln -s /usr/lib/jvm/java-7-oracle/jre/lib/i386/libnpjp2.so /usr/lib/cromo/libnpjp2.so
  ln -s /usr/lib/jvm/java-7-oracle/jre/lib/i386/libnpjp2.so /usr/lib/mozilla/plugins/libnpjp2.so
  ln -s /usr/lib/jvm/java-7-oracle/jre/lib/i386/libnpjp2.so /usr/lib/libnpjp2.so
  ln -s /usr/lib/jvm/java-7-oracle/jre/lib/i386/libnpjp2.so /opt/google/chrome/libnpjp2.so
fi
curl -L https://raw.github.com/gist/3065781/99java > /etc/env.d/99java
env-update
restart ui
